<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TaskMaster | Schedule</title>
    <link rel="stylesheet" href="/css/dashboard.css" />
    <link rel="stylesheet" href="/css/schedule.css" />
    <link rel="stylesheet" href="/css/mobile.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.14/index.global.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const goals = <%- JSON.stringify(goals) %>;
        // const goals = JSON.parse(goals_str);

        const events = goals.map((goal) => {
          return {
            title: goal.title,
            start: goal.createdAt,
            end: goal.dueDate,
          };
        });

        const headerToolBar = {
            left: 'prev, next, today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,timeGridDay'
          };

          if (window.innerWidth < 960) {
            headerToolBar.right = undefined;
          }

        var calendarEl = document.getElementById("calendar");
        var calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: "dayGridMonth",
          headerToolbar: headerToolBar,
          events: events,
          editable: true
        });
        calendar.render();
      });
    </script>
  </head>
  <body>
    <header>
      <a href="/"><img src="/img/LogoSample_ByTailorBrands-removebg-preview.png" alt="" class="logo" /></a>
      <a href="/settings">
        <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 16 16">
          <title>profile</title>
          <g stroke-width="1" fill="#000000" stroke="#000000" class="nc-icon-wrapper">
            <circle
              data-color="color-2"
              cx="8"
              cy="3.5"
              r="3"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></circle>
            <path
              d="M8,9a6.5,6.5,0,0,0-6.5,6.5h13A6.5,6.5,0,0,0,8,9Z"
              fill="none"
              stroke="#000000"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></path>
          </g>
        </svg>
      </a>
    </header>

    <section>
      <svg
        width="21"
        height="14"
        viewBox="0 0 21 14"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        class="hamburger"
      >
        <path
          d="M20.645 13.005C20.645 13.555 20.199 14 19.65 14H11.64C11.3761 14 11.123 13.8952 10.9364 13.7086C10.7498 13.522 10.645 13.2689 10.645 13.005C10.645 12.7411 10.7498 12.488 10.9364 12.3014C11.123 12.1148 11.3761 12.01 11.64 12.01H19.65C20.2 12.01 20.645 12.455 20.645 13.005ZM20.645 7C20.645 7.55 20.199 7.995 19.65 7.995H1.64002C1.37613 7.995 1.12305 7.89017 0.936448 7.70357C0.74985 7.51697 0.64502 7.26389 0.64502 7C0.64502 6.73611 0.74985 6.48303 0.936448 6.29643C1.12305 6.10983 1.37613 6.005 1.64002 6.005H19.65C20.2 6.005 20.645 6.451 20.645 7ZM19.65 1.99C19.9139 1.99 20.167 1.88517 20.3536 1.69857C20.5402 1.51197 20.645 1.25889 20.645 0.995C20.645 0.731109 20.5402 0.478027 20.3536 0.291429C20.167 0.10483 19.9139 7.86455e-09 19.65 0H7.64002C7.50935 -3.89413e-09 7.37997 0.0257364 7.25925 0.0757399C7.13853 0.125743 7.02884 0.199034 6.93645 0.291429C6.84405 0.383823 6.77076 0.493511 6.72076 0.61423C6.67076 0.734949 6.64502 0.864335 6.64502 0.995C6.64502 1.12567 6.67076 1.25505 6.72076 1.37577C6.77076 1.49649 6.84405 1.60618 6.93645 1.69857C7.02884 1.79097 7.13853 1.86426 7.25925 1.91426C7.37997 1.96426 7.50935 1.99 7.64002 1.99H19.65Z"
          fill="black"
        />
      </svg>
      <nav class="header2">
        <a href="/dashboard" class="settings">
          <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24">
            <title>home 3</title>
            <g stroke-width="1" fill="#000000" stroke="#000000" class="nc-icon-wrapper">
              <polyline
                data-cap="butt"
                points="10 23 10 17 14 17 14 23"
                fill="none"
                stroke="#000000"
                stroke-miterlimit="10"
              ></polyline>
              <polyline
                data-cap="butt"
                data-color="color-2"
                points="1 11 12 2 23 11"
                fill="none"
                stroke="inherit"
                stroke-miterlimit="10"
              ></polyline>
              <line
                data-cap="butt"
                data-color="color-2"
                x1="4"
                y1="8.545"
                x2="4"
                y2="4"
                fill="none"
                stroke="inherit"
                stroke-miterlimit="10"
              ></line>
              <polyline
                points="4 13 4 23 20 23 20 13"
                fill="none"
                stroke="#000000"
                stroke-linecap="square"
                stroke-miterlimit="10"
              ></polyline>
              <rect data-stroke="none" x="11" y="11" width="2" height="2" fill="#000000" stroke="none"></rect>
              <rect
                x="11"
                y="11"
                width="2"
                height="2"
                fill="none"
                stroke="#000000"
                stroke-linecap="square"
                stroke-miterlimit="10"
              ></rect>
            </g>
          </svg>
          <h4 class="text2">Dashboard</h4>
        </a>

        <a href="/schedule" class="dashboard">
          <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 48 48">
            <title>cogwheel</title>
            <g stroke-width="1" fill="#000000" stroke="#000000" class="nc-icon-wrapper">
              <circle
                data-color="color-2"
                cx="24"
                cy="24"
                r="7"
                fill="none"
                stroke-linecap="square"
                stroke-miterlimit="10"
              ></circle>
              <path
                d="M46,27V21L39.6,20.466a15.89,15.89,0,0,0-2.072-4.991l4.155-4.91L37.435,6.322l-4.91,4.155A15.876,15.876,0,0,0,27.534,8.4L27,2H21l-.534,6.4a15.89,15.89,0,0,0-4.991,2.072l-4.91-4.155L6.322,10.565l4.155,4.91A15.876,15.876,0,0,0,8.4,20.466L2,21v6l6.4.534a15.89,15.89,0,0,0,2.072,4.991l-4.155,4.91,4.243,4.243,4.91-4.155A15.876,15.876,0,0,0,20.466,39.6L21,46h6l.534-6.405a15.89,15.89,0,0,0,4.991-2.072l4.91,4.155,4.243-4.243-4.155-4.91A15.876,15.876,0,0,0,39.6,27.534Z"
                fill="none"
                stroke="#000000"
                stroke-linecap="square"
                stroke-miterlimit="10"
              ></path>
            </g>
          </svg>
          <h4 class="text1">Schedule</h4>
        </a>

        <a href="/settings" class="settings">
          <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 48 48">
            <title>cogwheel</title>
            <g stroke-width="1" fill="#000000" stroke="#000000" class="nc-icon-wrapper">
              <circle
                data-color="color-2"
                cx="24"
                cy="24"
                r="7"
                fill="none"
                stroke-linecap="square"
                stroke-miterlimit="10"
              ></circle>
              <path
                d="M46,27V21L39.6,20.466a15.89,15.89,0,0,0-2.072-4.991l4.155-4.91L37.435,6.322l-4.91,4.155A15.876,15.876,0,0,0,27.534,8.4L27,2H21l-.534,6.4a15.89,15.89,0,0,0-4.991,2.072l-4.91-4.155L6.322,10.565l4.155,4.91A15.876,15.876,0,0,0,8.4,20.466L2,21v6l6.4.534a15.89,15.89,0,0,0,2.072,4.991l-4.155,4.91,4.243,4.243,4.91-4.155A15.876,15.876,0,0,0,20.466,39.6L21,46h6l.534-6.405a15.89,15.89,0,0,0,4.991-2.072l4.91,4.155,4.243-4.243-4.155-4.91A15.876,15.876,0,0,0,39.6,27.534Z"
                fill="none"
                stroke="#000000"
                stroke-linecap="square"
                stroke-miterlimit="10"
              ></path>
            </g>
          </svg>
          <h4 class="text1">Settings</h4>
        </a>
      </nav>

      <% if (hasSchedule == true) { %>
      <main class="schedule-main">
        <!-- <h1>Your Schedule</h1> -->
        <div id="calendar" class="calender"></div>
      </main>
      <% } else { %>
      <p class="no-schedule">You don't have an active schedule!</p>
      <% } %>
    </section>
    <script src="/js/acme.js"></script>
  </body>
</html>
