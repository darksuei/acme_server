<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings</title>
    <link rel="stylesheet" href="/css/settings.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css" />
  </head>
  <body>
    <header>
      <a href="/"><img src="/img/LogoSample_ByTailorBrands-removebg-preview.png" alt="" class="logo" /></a>
      <a href="/settings">
        <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 16 16">
          <title>profile</title>
          <g stroke-width="1" fill="#000000" stroke="#000000" class="nc-icon-wrapper">
            <circle
              data-color="color-2"
              cx="8"
              cy="3.5"
              r="3"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></circle>
            <path
              d="M8,9a6.5,6.5,0,0,0-6.5,6.5h13A6.5,6.5,0,0,0,8,9Z"
              fill="none"
              stroke="#000000"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></path>
          </g>
        </svg>
      </a>
    </header>

    <section>
      <nav class="header2">
        <a href="/dashboard" class="dashboard">
          <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24">
            <title>home 3</title>
            <g stroke-width="1" fill="#000000" stroke="#000000" class="nc-icon-wrapper">
              <polyline
                data-cap="butt"
                points="10 23 10 17 14 17 14 23"
                fill="none"
                stroke="#000000"
                stroke-miterlimit="10"
              ></polyline>
              <polyline
                data-cap="butt"
                data-color="color-2"
                points="1 11 12 2 23 11"
                fill="none"
                stroke="inherit"
                stroke-miterlimit="10"
              ></polyline>
              <line
                data-cap="butt"
                data-color="color-2"
                x1="4"
                y1="8.545"
                x2="4"
                y2="4"
                fill="none"
                stroke="inherit"
                stroke-miterlimit="10"
              ></line>
              <polyline
                points="4 13 4 23 20 23 20 13"
                fill="none"
                stroke="#000000"
                stroke-linecap="square"
                stroke-miterlimit="10"
              ></polyline>
              <rect data-stroke="none" x="11" y="11" width="2" height="2" fill="#000000" stroke="none"></rect>
              <rect
                x="11"
                y="11"
                width="2"
                height="2"
                fill="none"
                stroke="#000000"
                stroke-linecap="square"
                stroke-miterlimit="10"
              ></rect>
            </g>
          </svg>
          <h4 class="text2">Dashboard</h4>
        </a>

        <a href="/schedule" class="dashboard">
          <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 48 48">
            <title>cogwheel</title>
            <g stroke-width="1" fill="#000000" stroke="#000000" class="nc-icon-wrapper">
              <circle
                data-color="color-2"
                cx="24"
                cy="24"
                r="7"
                fill="none"
                stroke-linecap="square"
                stroke-miterlimit="10"
              ></circle>
              <path
                d="M46,27V21L39.6,20.466a15.89,15.89,0,0,0-2.072-4.991l4.155-4.91L37.435,6.322l-4.91,4.155A15.876,15.876,0,0,0,27.534,8.4L27,2H21l-.534,6.4a15.89,15.89,0,0,0-4.991,2.072l-4.91-4.155L6.322,10.565l4.155,4.91A15.876,15.876,0,0,0,8.4,20.466L2,21v6l6.4.534a15.89,15.89,0,0,0,2.072,4.991l-4.155,4.91,4.243,4.243,4.91-4.155A15.876,15.876,0,0,0,20.466,39.6L21,46h6l.534-6.405a15.89,15.89,0,0,0,4.991-2.072l4.91,4.155,4.243-4.243-4.155-4.91A15.876,15.876,0,0,0,39.6,27.534Z"
                fill="none"
                stroke="#000000"
                stroke-linecap="square"
                stroke-miterlimit="10"
              ></path>
            </g>
          </svg>
          <h4 class="text1">Schedule</h4>
        </a>

        <div class="settings">
          <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 48 48">
            <title>cogwheel</title>
            <g stroke-width="1" fill="#000000" stroke="#000000" class="nc-icon-wrapper">
              <circle
                data-color="color-2"
                cx="24"
                cy="24"
                r="7"
                fill="none"
                stroke-linecap="square"
                stroke-miterlimit="10"
              ></circle>
              <path
                d="M46,27V21L39.6,20.466a15.89,15.89,0,0,0-2.072-4.991l4.155-4.91L37.435,6.322l-4.91,4.155A15.876,15.876,0,0,0,27.534,8.4L27,2H21l-.534,6.4a15.89,15.89,0,0,0-4.991,2.072l-4.91-4.155L6.322,10.565l4.155,4.91A15.876,15.876,0,0,0,8.4,20.466L2,21v6l6.4.534a15.89,15.89,0,0,0,2.072,4.991l-4.155,4.91,4.243,4.243,4.91-4.155A15.876,15.876,0,0,0,20.466,39.6L21,46h6l.534-6.405a15.89,15.89,0,0,0,4.991-2.072l4.91,4.155,4.243-4.243-4.155-4.91A15.876,15.876,0,0,0,39.6,27.534Z"
                fill="none"
                stroke="#000000"
                stroke-linecap="square"
                stroke-miterlimit="10"
              ></path>
            </g>
          </svg>
          <h4 class="text1">Settings</h4>
        </div>
      </nav>

      <main>
        <h1 class="text3">Settings</h1>
        <h3 class="text4">General</h3>

        <div class="main-content">
          <div class="settingsform">
            <h1 class="text6">User Information</h1>
            <h3 class="text7">Make changes and save to update your user infomation</h3>
            <form action="/api/user/update-user" method="post">
              <div class="input-group">
                <label for="fullname">Full Name</label>
                <input type="text" placeholder="Full Name" name="fullName" value="<%= fullName %>" />
                <p class="text5">This is your full name</p>
              </div>

              <div class="input-group">
                <label for="email">Email</label>
                <input type="email" placeholder="Email" name="email" value="<%= email %>" readonly />
                <p class="text5">Enter your Email</p>
              </div>

              <div class="input-group">
                <label for="phone">Phone</label>
                <input
                  class="inp3"
                  type="tel"
                  placeholder="+234 123 456 7890"
                  name="phone"
                  value="<%= phone %>"
                />
                <p class="text5">Enter your phone number</p>
              </div>

              <div class="input-group">
                <label for="occupation">Occupation</label>
                <input
                  class="inp4"
                  type="text"
                  placeholder="occupation"
                  name="occupation"
                  value="<%= occupation %>"
                />
                <p class="text5">Enter your current occupation</p>
              </div>

              <div class="input-group">
                <label for="interests">Interests</label>
                <input
                  class="inp4"
                  type="text"
                  placeholder="interests"
                  name="interests"
                  value="<%= interests %>"
                />
                <p class="text5">Enter your current interests</p>
              </div>

              <button type="submit" class="btn3">Update user Details</button>
            </form>
          </div>

          <div class="sub-main-content">
            <div class="settingsform">
              <h1 class="text6">Change Password</h1>
              <form action="/api/user/update-password" method="post">
                <div class="input-group">
                  <label for="currentPassword">Current Password</label>
                  <input type="password" placeholder="********" name="currentPassword" required/>
                  <p class="text5">Enter your current password</p>
                </div>
                <div class="input-group">
                  <label for="newPassword">New Password</label>
                  <input type="password" placeholder="********" name="newPassword" required/>
                  <p class="text5">Enter your new password</p>
                </div>
                <div class="input-group">
                  <label for="confirmPassword">Confirm Password</label>
                  <input type="password" placeholder="********" name="confirmPassword" required/>
                  <p class="text5">Re-enter your new password</p>
                </div>

                <button type="submit" class="btn3">Change Password</button>
              </form>
            </div>
            <div class="settingsform">
              <h1 class="text6">Custom Settings</h1>
              <form action="/api/user/update-other-settings" method="post">
                <div class="input-group-row">
                  <input type="checkbox" name="notifications" <%= notifications ? 'checked' : '' %>/>
                  <label for="notification">Notifications</label>
                  <p class="text8">Would you like to recieve email notifications from the platform?</p>
                </div>
                <div class="input-group-row">
                  <input type="checkbox" name="darkMode" <%= darkMode ? 'checked' : '' %> />
                  <label for="darkMode">Dark Mode</label>
                  <p class="text8">Enable dark mode?</p>
                </div>

                <button type="submit" class="btn3">Save Changes</button>
            </div>
          </div>
        </div>
      </main>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
    <script>
      const notyf = new Notyf();

      function getQueryStringParams() {
        const params = {};
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
  
        if (urlParams.has('error')) {
          params.error = urlParams.get('error');
        }
        if (urlParams.has('success')) {
          params.success = urlParams.get('success');
        }
  
        return params;
      }
  
      // Get the query string parameters
      const queryParams = getQueryStringParams();
      
      if (queryParams.error) {
        notyf.error(queryParams.error);
        window.history.replaceState({}, document.title, "/settings");
      }
      if (queryParams.success) {
        notyf.success(queryParams.success);
        window.history.replaceState({}, document.title, "/settings");
      }
    </script>
  </body>
</html>
